<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" prefix="dcterms: http://purl.org/dc/terms/  foaf: http://xmlns.com/foaf/0.1/">
    <head>
        <title>The Homer Multitext and RDF-Based Integration</title>
        <link rel="stylesheet" href="../isaw-papers-7.css" />
        <link rel="dcterms:isPartOf" href="http://dlib.nyu.edu/awdl/isaw/isaw-papers/7/" />
    </head>

<body>
<article>
<header>
<h2>ISAW Papers 7.5 (Preprint)</h2>
<h1 property="dcterms:title">The Homer Multitext and RDF-Based Integration</h1>
<h2><span property="dcterms:creator">Christopher W. Blackwell</span> and <span property="dcterms:creator">D. Neel Smith</span></h2>
</header>

<section id="section1">
<h2>The Project</h2>

<p id="p1">The <a
						href="http://www.homermultitext.org">Homer Multitext</a> (HMT) is an
					international collaboration aimed at recovering and documenting the history of
					Greek epic poetry based on primary source documents, particularly the
					fragmentary papyri from late Antiquity and the annotated Byzantine codices of
					the Homeric <em>Iliad</em>. The data generated by the project consists of image
					files, transcriptions and translations of Greek and Latin texts in poetry and
					prose, commentary texts, and relationships among these. The digital library
					architecture that the project has developed since 2001 to manage this work is
					called <strong>CITE</strong> for <strong>Collections, Indices, Texts and
						Extensions</strong>.</p>

<p id="p2">Through participation in the LAWDI workshop at New York University in the summer of 2012, the HMT’s editors recognized the significant potential of RDF triples not only as a means of linking between projects, but of capturing and integrating the project’s data for internal use. The simplicity of RDF, combined with its flexibility, freely available tools, and widespread support, moved us to integrate RDF into the heart of our workflow and architecture. </p>
</section>

<section id="section2">
<h2>Separation of Concerns</h2>

<p id="p2">Integrating a large, diverse, and evolving body of data, under development by a widely
					distributed group of scholars at many stages of their career, from first-year
					students of Greek to tenured Professors at major universities, requires rigorous
					attention to separation of concerns. We have tried to separate scholarly
					activities cleanly, and associate with each activity an archival data format
					most appropriate for it. </p>

<p id="p3">For example, it is most convenient to edit a transcription of a Greek texts as a valid TEI-XML
					document.  Subsequent analysis of that document, however, is made considerably
					more difficult by the arbitrarily deep hierarchical structure of any non-trivial
					XML text; for many kinds of analysis, processing a flattened, tabular format is
					preferable. For serving, querying, and sharing the archival material, an RDF
					triplestore is most efficient and broadly useful. For presentation of data
					delivered to web browsers for human or machine consumption, a combination of
					XML, XSLT, and CSS is most convenient. Since 2012, much of the development on
					the CITE architecture has focused on a test-driven environment for a publication
					cycle of edit, test, integrate, compile, serve, and format.</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Task</th>
	<th style="text-align:left;">Format</th>
	<th style="text-align:left;">Tools</th>
	<th style="text-align:left;">Validation</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;" colspan="4">Editing</td>
</tr>
<tr>
	<td style="text-align:left;">Texts</td>
	<td style="text-align:left;">TEI-XML</td>
	<td style="text-align:left;">Oxygen, <em>vel sim.</em></td>
	<td style="text-align:left;">RelaxNG Schema</td>
</tr>
<tr>
	<td style="text-align:left;">Collections</td>
	<td style="text-align:left;">Plain text, comma- or tab-delimited</td>
	<td style="text-align:left;">Google Fusion Tables, Git Online Editor, &amp;c.</td>
	<td
								style="text-align:left;">csv/tsv parsing libraries</td>
</tr>
<tr>
	<td style="text-align:left;" colspan="3">Building &amp; Integrating</td>
</tr>
<tr>
	<td style="text-align:left;">Testing Validity of Texts</td>
	<td style="text-align:left;">flattened, tabular data</td>
	<td style="text-align:left;">Gradle build-system</td>
	<td style="text-align:left;">Custom scripts, Perseus Morphological Service</td>
</tr>
<tr>
	<td style="text-align:left;">Integrating Texts, Data, and Images</td>
	<td style="text-align:left;">RDF triples</td>
	<td style="text-align:left;">Gradle build-system</td>
	<td style="text-align:left;">Custom scripts</td>
</tr>
<tr>
	<td style="text-align:left;" colspan="4">Publishing</td>
</tr>
<tr>
	<td style="text-align:left;">Serving Data</td>
	<td style="text-align:left;">RDF triples</td>
	<td style="text-align:left;">Fuseki SPARQL endpoint, <em>vel sim.</em></td>
	<td style="text-align:left;"></td>
</tr>
<tr>
	<td style="text-align:left;">Discovery, Query, Retrieval</td>
	<td style="text-align:left;">RDF triples &gt; XML</td>
	<td style="text-align:left;">CITE Servlet</td>
	<td style="text-align:left;"></td>
</tr>
<tr>
	<td style="text-align:left;">End-user display</td>
	<td style="text-align:left;">Citations &gt; XML Fragments &gt; HTML</td>
	<td style="text-align:left;">CITEKit</td>
	<td style="text-align:left;"></td>
</tr>
</tbody>
</table>
</section>

<section id="section3">
<h2>URN Citation</h2>

<p id="p4">Every object in the HMT can be cited by a URN—CTS URNs for texts, CITE URNs for objects and images.<sup><a href="#footnote-1" id="footnote-reference-1"  class="footnote-reference">1</a></sup></p>

<h2 id="amodeloftext">A Model of “Text”</h2>

<p id="p5">The most complex data in the HMT are the texts, and for this separation of concerns to work we have to be working with a conceptual model of “text” that allows us to move from hierarchical XML to tabular data to RDF <em>and back to hiearchical XML</em> without loss. </p>

<p id="p6">For our purposes, we define a “text” as an “ordered hierarchy of citation objects”, following the
							<em>OHCO<sup>2</sup></em> defined by Neel Smith and Gabriel Weaver.<sup><a
							class="footnote-reference"
							href="#footnote-2"
							id="footnote-reference-2">2</a></sup> By prioritizing <em>units of
						citation</em> over any other hierarchy, we can guarantee the most important
					scholarly activity: citation and retrieval. Any other content elements or
					orthogonal views of a text can be accomodated by this model, to a greater or
					lesser degree of granularity, depending on editorial decisions about
					citation.</p>

<p id="p7"><em>OHCO<sup>2</sup></em> is implemented in the CITE architecture through the Canonical Text Services protocol, which defines a structure for a catalog, a small number of valid requests for discovery and retrieval, and the format of responses to those requests. </p>
</section>

<section id="section4">
<h2>Collections and Images</h2>

<p id="p8">CITE defines a “collection” as a group of data objects sharing a defined set of fields. Each object has a URN, and named fields defined in a catalog. Collections may be ordered or unordered; in an ordered collection each object has one field that defines its place in a sequence with an integer value. </p>

</section>

<section id="section5">
<h2 id="sub-referencestourns">Sub-references to URNs</h2>

<p>CITE and CTS URNs define texts, collections, or images. Because scholarship demands citation to specific parts of objects—passages of text, regions-of-interest on objects, particular fields of a data-object—all CITE URNs may include a sub-reference, providing arbitary granularity, specific to the object defined by the URN. </p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Type</th>
	<th style="text-align:left;">URN</th>
	<th style="text-align:left;">Points to…</th>
	<th style="text-align:left;">Sub-reference?</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">CTS Text</td>
	<td style="text-align:left;">urn:cts:greekLit:tlg0012.tlg001.msA</td>
	<td style="text-align:left;">Homer, <em>Iliad</em>, edition of Manuscript A</td>
	<td style="text-align:left;">none</td>
</tr>
<tr>
	<td style="text-align:left;">CTS Text</td>
	<td style="text-align:left;">urn:cts:greekLit:tlg0012.tlg001.msA:1.1</td>
	<td style="text-align:left;">Homer, <em>Iliad</em>, edition of Manuscript A, Book 1, Line 1</td>
	<td style="text-align:left;">none</td>
</tr>
<tr>
	<td style="text-align:left;">CTS Text</td>
	<td style="text-align:left;">urn:cts:greekLit:tlg0012.tlg001.msA:1.1@μῆνιν</td>
	<td style="text-align:left;">Homer, <em>Iliad</em>, edition of Manuscript A, Book 1, Line 1</td>
	<td style="text-align:left;">the string “μῆνιν”</td>
</tr>
<tr>
	<td style="text-align:left;">CITE Image</td>
	<td style="text-align:left;">urn:cite:hmt:vaimg.VA052RN&#8211;0053</td>
	<td style="text-align:left;"><code>hmt</code> namespace, <code>vaimg</code> collection, image <code>VA052RN-0053</code></td>
	<td style="text-align:left;">none</td>
</tr>
<tr>
	<td style="text-align:left;">CITE Image</td>
	<td style="text-align:left;">urn:cite:hmt:vaimg.VA052RN&#8211;0053@0.1381,0.4192,0.3954,0.0368</td>
	<td style="text-align:left;"><code>hmt</code> namespace, <code>vaimg</code> collection, image <code>VA052RN-0053</code></td>
	<td style="text-align:left;">a rectangular region-of-interest</td>
</tr>
<tr>
	<td style="text-align:left;">CITE Object</td>
	<td style="text-align:left;">urn:cite:hmt:venAsign.10</td>
	<td style="text-align:left;"><code>hmt</code> namespace, <code>venAsign</code> collection, item 10</td>
	<td style="text-align:left;">none</td>
</tr>
<tr>
	<td style="text-align:left;">CITE Object</td>
	<td style="text-align:left;">urn:cite:hmt:venAsign.10@GreekName</td>
	<td style="text-align:left;"><code>hmt</code> namespace, <code>venAsign</code> collection, item 10</td>
	<td style="text-align:left;">the contents of the field <code>GreekName</code> for this item</td>
</tr>
</tbody>
</table>
</section>

<section id="section6">
<h2 id="doingtheworkatbuild-time">Doing the Work at Build-Time</h2>

<h3 id="validationandtesting">Validation and Testing</h3>

<p id="p9">We use <a
						href="http://www.gradle.org">Gradle</a> to build our <code>.ttl</code> file,
					compiling XML texts, and collections and indices saved as <code>.csv</code> or
						<code>.tsv</code> files. Our build-scripts perform validation on XML files
					as well as other domain-specific tests. <code>HMT-MOM</code> (for “Mandatory
					Ongoing Maintanance”) includes scripts that enforce a specified canon of
					legitimate Unicode characters for Greek texts, ensure the referential integrity
					of URN values in indices and CITE Collection data structures, and support
					further manual review by providing visualizations of the state of completion for
					each folio our collaborators edit. <code>HMT-MOM</code> also does linguistic
					checking, matching each word-token against the Morpheus morphological parser;
					words that fail to match must be identified as non-standard forms actually
					present on a manuscript, non-lexical strings (numbers, case-endings, etc.), or
					new Greek vocabulary to be entered (ultimately) into a new lexicon of the
					language.</p>

<h3 id="inferencing">Inferencing</h3>

<p id="p10">The URN-syntax of all CITE citations captures hierarchical relationships between group/work/edition/citation (for texts) or namespace/collection/object (for data objects and images). The citations show us that <code>urn:cts:greekLit:tlg0012.tlg001.msA:1.11</code> (Homer, <em>Iliad</em>, MS. A edition, Book 1, line 11), <em>belongs to</em> <code>urn:cts:greekLit:tlg0012.tlg001</code> (Homer, <em>Iliad</em>), and so forth. </p>

<p id="p11">Earlier versions of our CITE services—perl, Cocoon, eXist, AppEngine—were processor-intensive, sorting out hiearchical relationships a N-levels of depth on the fly. Some of the solutions to implementing a generic architecture for complex data were clever.</p>

<p id="p12">In the current implementation of CITE/CTS services, we take advantage of RDF to avoid cleverness at all costs. The <a href="http://www.gradle.org">Gradle</a> build <code>citemgr</code> that processes our XML texts, tab-delimited and comma-delimited collections and indices, and their catalogues, and makes explicit at build-time every relationship necessary to capture the model of a text or collection-object.</p>

<p id="p13">A complete list of the RDF verbs used to describe the Homer Multitext data is available <a href="http://beta.hpcc.uh.edu:3030/ds/query?query=select+distinct+%3Fv+where+%7B%0D%0A%0D%0A%3Fs+%3Fv+%3Fo+.%0D%0A%0D%0A%7D&amp;output=text&amp;stylesheet=%2Fxml-to-html.xsl">through this query</a>:</p>


<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"></th>
	<th style="text-align:left;"></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">SPARQL Endpoint</td>
	<td style="text-align:left;"><a href="http://beta.hpcc.uh.edu:3030/ds/"><code>http://beta.hpcc.uh.edu:3030/ds/</code></a></td>
</tr>
<tr>
	<td style="text-align:left;">Query</td>
	<td style="text-align:left;"><code>select distinct ?v where { ?s ?v ?o . }</code></td>
</tr>
</tbody>
</table>

<p id="p14">Building the CITE Services, then, is an exercise in constructing sufficient SPARQL queries to
					retrieve triples, based on their URN subjects.</p>

<p id="p15">We have found this to accelerate our speed of developing and exposing HMT data, using a CITE service written as a Java Servlet, with a Fuseki triple-store. The build-process that constructs a <code>.ttl</code> file of 443,000 lines, containing all of our HMT data (texts, objects, images), currently takes one minute, 13 seconds, on a three-year-old Mac Pro.</p>

<p id="p16">With this system, we have a very clean separation of concerns between archival data, served data, the network service, and end-user applications, with each standing entirely on their own. The archival texts and data are complete, of course, and end-users can retrieve them by resolving citations through the CITE service, and our RDF storage captures and makes explicit all intrinsic relationships among objects in our digital library. This strikes us a a clean, open, and forward-looking approach.</p>

<p id="p17">The cost is the time spent building the <code>.ttl</code> file (which is inconsiderabe), and inefficiency in the middle layers, between the CITE Service and the SPARQL endpoint. It takes 10 SPARQL queries to retrieve and re-assemble one citation-node of a text, in response to a CTS <code>GetPassagePlus</code> query.</p>

<p id="p18">This approach may not scale. In our ongoing collaboration with the Department of Informatik at
					Leipzig University, which is working toward implementing a CTS library
					containing tens of thousands of books, we are finding that the computing cost of
					making an averge of 10 SPARQL queries for each requested citation-node, when the
					SPARQL server is hosting millions of statements, might require a more efficient,
					more clever, solution that works directly with URNs at query time.
					Alternatively, a client that connects to a SPARQL end point using web sockets
					may solve what is primarily an I/O bottleneck.  In either case,  the value of
					having cleanly separated concerns—data, integration, storage, services,
					applications—will be even more apparent.</p>

</section>

<section id="section6">

<h2>Sourcecode and Data</h2>

<p id="p19">All data for the Homer Multitext is freely available.</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Package</th>
	<th style="text-align:left;">URL</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">Direct download of archived images</td>
	<td style="text-align:left;"><a href="http://amphoreus.hpcc.uh.edu">http://amphoreus.hpcc.uh.edu</a></td>
</tr>
<tr>
	<td style="text-align:left;">Nexus Repository for versioned artifacts</td>
	<td style="text-align:left;"><a href="http://beta.hpcc.uh.edu/nexus/index.html">http://beta.hpcc.uh.edu/nexus/index.html</a></td>
</tr>
<tr>
	<td style="text-align:left;">HMT-XML: working repository for project data</td>
	<td
								style="text-align:left;">https://github.com/neelsmith/hmtarchive</td>
</tr>
<tr>
	<td style="text-align:left;">CITE-Manager: integrate, test, and build RDF from project data</td>
	<td style="text-align:left;"><a href="https://github.com/neelsmith/citemgr">https://github.com/neelsmith/citemgr</a></td>
</tr>
<tr>
	<td style="text-align:left;">CITE-Servlet: CITE/CTS Services implemented as a Java servlet, querying a SPARQL endpoint</td>
	<td style="text-align:left;"><a href="https://github.com/neelsmith/citeservlet">https://github.com/neelsmith/citeservlet</a></td>
</tr>
<tr>
	<td style="text-align:left;">CITEKit: resolve CITE/CTS URNs to their objects via AJAX in HTML</td>
	<td style="text-align:left;"><a href="https://bitbucket.org/Eumaeus/citekit">https://bitbucket.org/Eumaeus/citekit</a></td>
</tr>
</tbody>
</table>

</section>

<section id="notes">
<h2>Notes</h2>
<p class="footnote" id="footnote-1"><sup><a href="#footnote-reference-1">1</a></sup> Blackwell, C., and D.N. Smith. “A Gentle Introduction to CTS &amp; CITE URNs.” <em>Homer Multitext Project Documentation</em> (November 2012). http://www.homermultitext.org/hmt-doc/guides/urn-gentle-intro.html.</p>

<p class="footnote" id="footnote-2"><sup><a href="#footnote-reference-2">2</a></sup> Smith, D. Neel, and Gabriel Weaver. “Applying Domain Knowledge from Structured Citation Formats to Text and Data Mining: Examples Using the CITE Architecture.” <em>Text Mining Services</em> (2009): 129.</p>
</section>
<footer>
<p>©2013 Christopher W. Blackwell and D. Neel Smith. Published under the <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a> license.</p>
<p>This article is part of <i><a href="http://dlib.nyu.edu/awdl/isaw/isaw-papers/7/">ISAW Papers 7</a></i>.</p>
</footer>
</article>
</body>
</html>
